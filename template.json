{
  "meta": {
    "id": "FormQAR-054_UI_SCHEMA_PACK",
    "source_file": "template.py",
    "revision": "C",
    "renderer_targets": [
      "docx",
      "pdf",
      "web"
    ],
    "preserve_layout_fidelity": true
  },
  "schema": {
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "urn:coopersurgical:psur:FormQAR-054:ui-schema:revC",
    "title": "FormQAR-054 PSUR UI Schema (Rev C)",
    "description": "UI-oriented JSON Schema for FormQAR-054 (PSUR). Includes field types, required/optional, validation rules, and basic UI hints.",
    "type": "object",
    "additionalProperties": false,
    "required": [
      "form",
      "psur_cover_page",
      "sections"
    ],
    "properties": {
      "form": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "form_id",
          "form_title",
          "revision",
          "document_control"
        ],
        "properties": {
          "form_id": {
            "type": "string",
            "const": "FormQAR-054"
          },
          "form_title": {
            "type": "string",
            "const": "Periodic Safety Update Report (PSUR)"
          },
          "revision": {
            "type": "string",
            "default": "C"
          },
          "document_control": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "product_or_product_family",
              "infocard_number"
            ],
            "properties": {
              "product_or_product_family": {
                "type": "string",
                "minLength": 1,
                "ui": {
                  "widget": "text",
                  "label": "Product or Product Family"
                }
              },
              "infocard_number": {
                "type": "string",
                "minLength": 1,
                "ui": {
                  "widget": "text",
                  "label": "Infocard Number"
                }
              },
              "page_control": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "current_page": {
                    "type": [
                      "integer",
                      "null"
                    ],
                    "minimum": 1,
                    "ui": {
                      "widget": "number"
                    }
                  },
                  "total_pages": {
                    "type": [
                      "integer",
                      "null"
                    ],
                    "minimum": 1,
                    "ui": {
                      "widget": "number"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "psur_cover_page": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "manufacturer_information",
          "regulatory_information",
          "document_information"
        ],
        "properties": {
          "manufacturer_information": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "company_name",
              "address_lines",
              "manufacturer_srn",
              "authorized_representative"
            ],
            "properties": {
              "company_name": {
                "type": "string",
                "minLength": 1,
                "default": "CooperSurgical, Inc.",
                "ui": {
                  "widget": "text"
                }
              },
              "address_lines": {
                "type": "array",
                "minItems": 1,
                "items": {
                  "type": "string",
                  "minLength": 1
                },
                "ui": {
                  "widget": "textarea",
                  "label": "Manufacturer Address (lines)"
                }
              },
              "manufacturer_srn": {
                "type": "string",
                "pattern": "^[A-Z]{2}-MF-\\d{10,}$",
                "default": "US-MF-000002607",
                "ui": {
                  "widget": "text",
                  "help": "Format: US-MF-##########"
                }
              },
              "authorized_representative": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "is_applicable"
                ],
                "properties": {
                  "is_applicable": {
                    "type": "boolean",
                    "default": true,
                    "ui": {
                      "widget": "checkbox",
                      "label": "Authorized Representative applicable?"
                    }
                  },
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "default": "CooperSurgical Distribution B.V.",
                    "ui": {
                      "widget": "text"
                    }
                  },
                  "address_lines": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                      "type": "string",
                      "minLength": 1
                    },
                    "default": [
                      "Celsiusweg 35",
                      "5928 PR Venlo",
                      "The Netherlands"
                    ],
                    "ui": {
                      "widget": "textarea"
                    }
                  },
                  "authorized_representative_srn": {
                    "type": "string",
                    "pattern": "^[A-Z]{2}-AR-\\d{10,}$",
                    "default": "NL-AR-0000000059",
                    "ui": {
                      "widget": "text",
                      "help": "Format: NL-AR-##########"
                    }
                  }
                },
                "allOf": [
                  {
                    "if": {
                      "properties": {
                        "is_applicable": {
                          "const": true
                        }
                      }
                    },
                    "then": {
                      "required": [
                        "name",
                        "address_lines",
                        "authorized_representative_srn"
                      ]
                    }
                  }
                ]
              }
            }
          },
          "regulatory_information": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "certificate_number",
              "date_of_issue",
              "notified_body",
              "psur_available_within_3_working_days"
            ],
            "properties": {
              "certificate_number": {
                "type": "string",
                "minLength": 1,
                "ui": {
                  "widget": "text"
                }
              },
              "date_of_issue": {
                "type": "string",
                "format": "date",
                "ui": {
                  "widget": "date"
                }
              },
              "notified_body": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "name",
                  "number"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "minLength": 1,
                    "default": "BSI Group The Netherlands B.V.",
                    "ui": {
                      "widget": "text"
                    }
                  },
                  "number": {
                    "type": "string",
                    "pattern": "^\\d{4}$",
                    "default": "2797",
                    "ui": {
                      "widget": "text",
                      "help": "4-digit NB number"
                    }
                  }
                }
              },
              "psur_available_within_3_working_days": {
                "type": "boolean",
                "default": true,
                "ui": {
                  "widget": "checkbox"
                }
              }
            }
          },
          "document_information": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "data_collection_period",
              "psur_cadence"
            ],
            "properties": {
              "data_collection_period": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "start_date",
                  "end_date"
                ],
                "properties": {
                  "start_date": {
                    "type": "string",
                    "format": "date",
                    "ui": {
                      "widget": "date"
                    }
                  },
                  "end_date": {
                    "type": "string",
                    "format": "date",
                    "ui": {
                      "widget": "date"
                    }
                  }
                },
                "allOf": [
                  {
                    "if": {
                      "required": [
                        "start_date",
                        "end_date"
                      ]
                    },
                    "then": {
                      "properties": {
                        "end_date": {
                          "format": "date"
                        }
                      }
                    }
                  }
                ]
              },
              "psur_cadence": {
                "type": "string",
                "enum": [
                  "ANNUALLY",
                  "EVERY_TWO_YEARS"
                ],
                "ui": {
                  "widget": "select"
                }
              }
            }
          }
        }
      },
      "sections": {
        "$ref": "#/$defs/sections"
      }
    },
    "$defs": {
      "TriState": {
        "type": "string",
        "enum": [
          "YES",
          "NO",
          "NOT_SELECTED"
        ],
        "default": "NOT_SELECTED"
      },
      "YesNoNA": {
        "type": "string",
        "enum": [
          "YES",
          "NO",
          "N_A",
          "NOT_SELECTED"
        ],
        "default": "NOT_SELECTED"
      },
      "MDRClass": {
        "type": "string",
        "enum": [
          "CLASS_IIA",
          "CLASS_IIB",
          "CLASS_III",
          "NOT_SELECTED"
        ],
        "default": "NOT_SELECTED"
      },
      "USFDAClass": {
        "type": "string",
        "enum": [
          "CLASS_I",
          "CLASS_II",
          "CLASS_III",
          "NOT_SELECTED"
        ],
        "default": "NOT_SELECTED"
      },
      "sections": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "A_executive_summary",
          "B_scope_and_device_description",
          "C_volume_of_sales_and_population_exposure",
          "D_information_on_serious_incidents",
          "E_customer_feedback",
          "F_product_complaint_types_counts_and_rates",
          "G_information_from_trend_reporting",
          "H_information_from_fsca",
          "I_corrective_and_preventive_actions",
          "J_scientific_literature_review",
          "K_review_of_external_databases_and_registries",
          "L_pmcf",
          "M_findings_and_conclusions"
        ],
        "properties": {
          "A_executive_summary": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "previous_psur_actions_status",
              "notified_body_review_status",
              "data_collection_period_changes",
              "benefit_risk_assessment_conclusion"
            ],
            "properties": {
              "previous_psur_actions_status": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "actions_and_status_from_previous_report",
                  "status_of_previous_actions"
                ],
                "properties": {
                  "actions_and_status_from_previous_report": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  },
                  "status_of_previous_actions": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": [
                      "status"
                    ],
                    "properties": {
                      "status": {
                        "type": "string",
                        "enum": [
                          "COMPLETED",
                          "IN_PROGRESS",
                          "NOT_STARTED",
                          "NOT_APPLICABLE",
                          "NOT_SELECTED"
                        ],
                        "default": "NOT_SELECTED",
                        "ui": {
                          "widget": "select"
                        }
                      },
                      "details_if_needed": {
                        "type": "string",
                        "ui": {
                          "widget": "textarea"
                        }
                      }
                    }
                  }
                }
              },
              "notified_body_review_status": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "previous_psur_reviewed_by_notified_body"
                ],
                "properties": {
                  "previous_psur_reviewed_by_notified_body": {
                    "$ref": "#/$defs/YesNoNA",
                    "ui": {
                      "widget": "select"
                    }
                  },
                  "notified_body_actions_taken": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  },
                  "status_of_nb_actions": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  }
                }
              },
              "data_collection_period_changes": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "data_collection_period_changed"
                ],
                "properties": {
                  "data_collection_period_changed": {
                    "$ref": "#/$defs/TriState",
                    "ui": {
                      "widget": "select"
                    }
                  },
                  "justification_for_change": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  },
                  "impact_on_comparability": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  }
                },
                "allOf": [
                  {
                    "if": {
                      "properties": {
                        "data_collection_period_changed": {
                          "const": "YES"
                        }
                      }
                    },
                    "then": {
                      "required": [
                        "justification_for_change",
                        "impact_on_comparability"
                      ]
                    }
                  }
                ]
              },
              "benefit_risk_assessment_conclusion": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "conclusion"
                ],
                "properties": {
                  "conclusion": {
                    "type": "string",
                    "enum": [
                      "NOT_ADVERSELY_IMPACTED_UNCHANGED",
                      "ADVERSELY_IMPACTED",
                      "NOT_SELECTED"
                    ],
                    "default": "NOT_SELECTED",
                    "ui": {
                      "widget": "select"
                    }
                  },
                  "high_level_summary_if_adversely_impacted": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  }
                },
                "allOf": [
                  {
                    "if": {
                      "properties": {
                        "conclusion": {
                          "const": "ADVERSELY_IMPACTED"
                        }
                      }
                    },
                    "then": {
                      "required": [
                        "high_level_summary_if_adversely_impacted"
                      ]
                    }
                  }
                ]
              }
            }
          },
          "B_scope_and_device_description": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "device_information",
              "device_classification",
              "device_timeline_and_status",
              "device_description_and_information",
              "device_information_breakdown",
              "data_collection_period_reporting_period_information",
              "technical_information",
              "model_catalog_numbers",
              "device_grouping_information"
            ],
            "properties": {
              "device_information": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "product_name",
                  "implantable_device"
                ],
                "properties": {
                  "product_name": {
                    "type": "string",
                    "minLength": 1
                  },
                  "implantable_device": {
                    "$ref": "#/$defs/TriState",
                    "ui": {
                      "widget": "select"
                    }
                  }
                }
              },
              "device_classification": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "eu_mdr_classification",
                  "eu_technical_documentation_number",
                  "classification_rule_mdr_annex_viii",
                  "uk_classification",
                  "us_fda_classification",
                  "us_pre_market_submission_number"
                ],
                "properties": {
                  "eu_mdr_classification": {
                    "$ref": "#/$defs/MDRClass",
                    "ui": {
                      "widget": "select"
                    }
                  },
                  "eu_technical_documentation_number": {
                    "type": "string",
                    "minLength": 1
                  },
                  "classification_rule_mdr_annex_viii": {
                    "type": "string",
                    "minLength": 1
                  },
                  "uk_classification": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": [
                      "is_applicable",
                      "uk_classification_value"
                    ],
                    "properties": {
                      "is_applicable": {
                        "type": "boolean",
                        "default": false
                      },
                      "uk_classification_value": {
                        "$ref": "#/$defs/MDRClass",
                        "ui": {
                          "widget": "select"
                        }
                      },
                      "uk_conformity_assessment_details": {
                        "type": "string",
                        "ui": {
                          "widget": "textarea"
                        }
                      },
                      "uk_classification_rule": {
                        "type": "string"
                      }
                    },
                    "allOf": [
                      {
                        "if": {
                          "properties": {
                            "is_applicable": {
                              "const": true
                            }
                          }
                        },
                        "then": {
                          "required": [
                            "uk_conformity_assessment_details",
                            "uk_classification_rule"
                          ]
                        }
                      }
                    ]
                  },
                  "us_fda_classification": {
                    "$ref": "#/$defs/USFDAClass",
                    "ui": {
                      "widget": "select"
                    }
                  },
                  "us_pre_market_submission_number": {
                    "type": "string",
                    "minLength": 1
                  }
                }
              },
              "device_timeline_and_status": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "certification_milestones",
                  "psur_obligation_status_assessment"
                ],
                "properties": {
                  "certification_milestones": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": [
                      "eu",
                      "uk"
                    ],
                    "properties": {
                      "eu": {
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                          "first_declaration_of_conformity_date": {
                            "type": "string",
                            "format": "date"
                          },
                          "first_ec_eu_certificate_date": {
                            "type": "string",
                            "format": "date"
                          },
                          "first_ce_marking_date": {
                            "type": "string",
                            "format": "date"
                          }
                        }
                      },
                      "uk": {
                        "type": "object",
                        "additionalProperties": false,
                        "required": [
                          "is_applicable"
                        ],
                        "properties": {
                          "is_applicable": {
                            "type": "boolean",
                            "default": false
                          },
                          "first_date_of_certification_or_doc_for_gb_market": {
                            "type": "string",
                            "format": "date"
                          },
                          "first_ce_marking_date": {
                            "type": "string",
                            "format": "date"
                          },
                          "first_market_placement_date": {
                            "type": "string",
                            "format": "date"
                          },
                          "first_service_deployment_date": {
                            "type": "string",
                            "format": "date"
                          }
                        },
                        "allOf": [
                          {
                            "if": {
                              "properties": {
                                "is_applicable": {
                                  "const": true
                                }
                              }
                            },
                            "then": {
                              "required": [
                                "first_date_of_certification_or_doc_for_gb_market",
                                "first_market_placement_date"
                              ]
                            }
                          }
                        ]
                      }
                    }
                  },
                  "psur_obligation_status_assessment": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": [
                      "market_status",
                      "certificate_status"
                    ],
                    "properties": {
                      "market_status": {
                        "type": "string",
                        "minLength": 1,
                        "ui": {
                          "widget": "textarea"
                        }
                      },
                      "last_device_sold_date_or_na": {
                        "type": "string",
                        "ui": {
                          "widget": "text",
                          "help": "Use date (YYYY-MM-DD) or 'N/A'"
                        }
                      },
                      "certificate_status": {
                        "type": "string",
                        "minLength": 1,
                        "ui": {
                          "widget": "textarea"
                        }
                      },
                      "projected_end_of_pms_period": {
                        "type": "string",
                        "ui": {
                          "widget": "text"
                        }
                      },
                      "confirmation_of_ongoing_psur_obligation": {
                        "type": "string",
                        "ui": {
                          "widget": "textarea"
                        }
                      }
                    }
                  }
                }
              },
              "device_description_and_information": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "device_description",
                  "intended_purpose_use"
                ],
                "properties": {
                  "device_description": {
                    "type": "string",
                    "minLength": 1,
                    "ui": {
                      "widget": "textarea"
                    }
                  },
                  "intended_purpose_use": {
                    "type": "string",
                    "minLength": 1,
                    "ui": {
                      "widget": "textarea"
                    }
                  },
                  "indications": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  },
                  "contraindications": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  },
                  "target_populations": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  }
                }
              },
              "device_information_breakdown": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "mdr_devices",
                  "legacy_devices"
                ],
                "properties": {
                  "mdr_devices": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": [
                      "basic_udi_di_rows"
                    ],
                    "properties": {
                      "basic_udi_di_rows": {
                        "type": "array",
                        "minItems": 1,
                        "items": {
                          "type": "object",
                          "additionalProperties": false,
                          "required": [
                            "basic_udi_di",
                            "device_trade_name",
                            "emdn_code"
                          ],
                          "properties": {
                            "basic_udi_di": {
                              "type": "string",
                              "minLength": 1
                            },
                            "device_trade_name": {
                              "type": "string",
                              "minLength": 1
                            },
                            "emdn_code": {
                              "type": "string",
                              "minLength": 1
                            },
                            "changes_from_previous_psur": {
                              "type": "string",
                              "ui": {
                                "widget": "textarea"
                              }
                            }
                          }
                        },
                        "ui": {
                          "widget": "table"
                        }
                      }
                    }
                  },
                  "legacy_devices": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": [
                      "is_applicable"
                    ],
                    "properties": {
                      "is_applicable": {
                        "type": "boolean",
                        "default": false
                      },
                      "device_group_family_rows": {
                        "type": "array",
                        "minItems": 0,
                        "items": {
                          "type": "object",
                          "additionalProperties": false,
                          "required": [
                            "device_group",
                            "trade_names",
                            "gmdn_code",
                            "market_availability_member_states"
                          ],
                          "properties": {
                            "device_group": {
                              "type": "string"
                            },
                            "trade_names": {
                              "type": "string",
                              "ui": {
                                "widget": "textarea"
                              }
                            },
                            "gmdn_code": {
                              "type": "string"
                            },
                            "market_availability_member_states": {
                              "type": "string",
                              "ui": {
                                "widget": "textarea"
                              }
                            }
                          }
                        },
                        "ui": {
                          "widget": "table"
                        }
                      }
                    }
                  }
                }
              },
              "data_collection_period_reporting_period_information": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "date_range"
                ],
                "properties": {
                  "date_range": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": [
                      "start_date",
                      "end_date"
                    ],
                    "properties": {
                      "start_date": {
                        "type": "string",
                        "format": "date"
                      },
                      "end_date": {
                        "type": "string",
                        "format": "date"
                      }
                    }
                  },
                  "pms_period_determination_uk_devices": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": [
                      "is_applicable"
                    ],
                    "properties": {
                      "is_applicable": {
                        "type": "boolean",
                        "default": false
                      },
                      "pms_period_determination_text": {
                        "type": "string",
                        "ui": {
                          "widget": "textarea"
                        }
                      },
                      "device_lifetime_text": {
                        "type": "string",
                        "ui": {
                          "widget": "textarea"
                        }
                      },
                      "projected_end_of_pms_period_text": {
                        "type": "string",
                        "ui": {
                          "widget": "textarea"
                        }
                      }
                    }
                  }
                }
              },
              "technical_information": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "risk_management_file_number",
                  "associated_documents"
                ],
                "properties": {
                  "risk_management_file_number": {
                    "type": "string",
                    "minLength": 1
                  },
                  "associated_documents": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                      "type": "object",
                      "additionalProperties": false,
                      "required": [
                        "document_type",
                        "document_number",
                        "document_title"
                      ],
                      "properties": {
                        "document_type": {
                          "type": "string",
                          "enum": [
                            "PMS Plan",
                            "Clinical Evaluation Report",
                            "PMCF Plan",
                            "Other"
                          ]
                        },
                        "document_number": {
                          "type": "string",
                          "minLength": 1
                        },
                        "document_title": {
                          "type": "string",
                          "minLength": 1
                        }
                      }
                    },
                    "ui": {
                      "widget": "table"
                    }
                  }
                }
              },
              "model_catalog_numbers": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "complete_listing_reference"
                ],
                "properties": {
                  "complete_listing_reference": {
                    "type": "string",
                    "minLength": 1,
                    "ui": {
                      "widget": "text",
                      "help": "Reference to an attachment or controlled list"
                    }
                  }
                }
              },
              "device_grouping_information": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "is_applicable",
                  "multiple_devices_included"
                ],
                "properties": {
                  "is_applicable": {
                    "type": "boolean",
                    "default": false
                  },
                  "multiple_devices_included": {
                    "$ref": "#/$defs/TriState",
                    "ui": {
                      "widget": "select"
                    }
                  },
                  "justification_for_grouping": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  },
                  "leading_device": {
                    "type": "string"
                  },
                  "leading_device_rationale": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  },
                  "same_clinical_evaluation_report": {
                    "$ref": "#/$defs/TriState",
                    "ui": {
                      "widget": "select"
                    }
                  },
                  "same_notified_body_for_all_devices": {
                    "$ref": "#/$defs/TriState",
                    "ui": {
                      "widget": "select"
                    }
                  },
                  "grouping_changes_from_previous_psur": {
                    "$ref": "#/$defs/TriState",
                    "ui": {
                      "widget": "select"
                    }
                  }
                }
              }
            }
          },
          "C_volume_of_sales_and_population_exposure": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "sales_methodology",
              "table_1_sales_by_region",
              "sales_data_analysis",
              "size_and_characteristics_of_population_using_device"
            ],
            "properties": {
              "sales_methodology": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "criteria_used_for_sales_data",
                  "market_history"
                ],
                "properties": {
                  "criteria_used_for_sales_data": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                      "devices_placed_on_market_or_put_into_service": {
                        "type": "boolean",
                        "default": false
                      },
                      "units_distributed_from_doc_or_ec_eu_mark_approval_to_end_date": {
                        "type": "boolean",
                        "default": false
                      },
                      "units_distributed_within_each_time_period": {
                        "type": "boolean",
                        "default": false
                      },
                      "episodes_of_use_for_reusable_devices": {
                        "type": "boolean",
                        "default": false
                      },
                      "active_installed_base": {
                        "type": "boolean",
                        "default": false
                      },
                      "units_implanted": {
                        "type": "boolean",
                        "default": false
                      },
                      "other": {
                        "type": "object",
                        "additionalProperties": false,
                        "required": [
                          "selected",
                          "rationale"
                        ],
                        "properties": {
                          "selected": {
                            "type": "boolean",
                            "default": false
                          },
                          "rationale": {
                            "type": "string",
                            "ui": {
                              "widget": "textarea"
                            }
                          }
                        }
                      }
                    }
                  },
                  "market_history": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  }
                }
              },
              "table_1_sales_by_region": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "use_if_psur_frequency"
                ],
                "properties": {
                  "use_if_psur_frequency": {
                    "type": "string",
                    "enum": [
                      "ANNUALLY",
                      "EVERY_TWO_YEARS"
                    ],
                    "ui": {
                      "widget": "select"
                    }
                  },
                  "annual_format": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                      "date_ranges": {
                        "type": "array",
                        "minItems": 4,
                        "maxItems": 4,
                        "items": {
                          "type": "string"
                        }
                      },
                      "rows": {
                        "type": "array",
                        "minItems": 0,
                        "items": {
                          "type": "object",
                          "additionalProperties": false,
                          "required": [
                            "region",
                            "preceding_12_month_periods",
                            "current_data_collection_period"
                          ],
                          "properties": {
                            "region": {
                              "type": "string"
                            },
                            "preceding_12_month_periods": {
                              "type": "array",
                              "minItems": 3,
                              "maxItems": 3,
                              "items": {
                                "type": [
                                  "number",
                                  "null"
                                ]
                              }
                            },
                            "current_data_collection_period": {
                              "type": [
                                "number",
                                "null"
                              ]
                            },
                            "percent_of_global_sales": {
                              "type": [
                                "number",
                                "null"
                              ],
                              "minimum": 0,
                              "maximum": 100
                            }
                          }
                        },
                        "ui": {
                          "widget": "table"
                        }
                      }
                    }
                  },
                  "every_two_years_format": {
                    "type": "object",
                    "additionalProperties": false,
                    "properties": {
                      "date_ranges": {
                        "type": "array",
                        "minItems": 4,
                        "maxItems": 4,
                        "items": {
                          "type": "string"
                        }
                      },
                      "rows": {
                        "type": "array",
                        "minItems": 0,
                        "items": {
                          "type": "object",
                          "additionalProperties": false,
                          "required": [
                            "region",
                            "period_values_12_month_each",
                            "total_24_month"
                          ],
                          "properties": {
                            "region": {
                              "type": "string"
                            },
                            "period_values_12_month_each": {
                              "type": "array",
                              "minItems": 4,
                              "maxItems": 4,
                              "items": {
                                "type": [
                                  "number",
                                  "null"
                                ]
                              }
                            },
                            "total_24_month": {
                              "type": [
                                "number",
                                "null"
                              ]
                            },
                            "percent_of_global_sales_24_month": {
                              "type": [
                                "number",
                                "null"
                              ],
                              "minimum": 0,
                              "maximum": 100
                            }
                          }
                        },
                        "ui": {
                          "widget": "table"
                        }
                      }
                    }
                  }
                },
                "allOf": [
                  {
                    "if": {
                      "properties": {
                        "use_if_psur_frequency": {
                          "const": "ANNUALLY"
                        }
                      }
                    },
                    "then": {
                      "required": [
                        "annual_format"
                      ]
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "use_if_psur_frequency": {
                          "const": "EVERY_TWO_YEARS"
                        }
                      }
                    },
                    "then": {
                      "required": [
                        "every_two_years_format"
                      ]
                    }
                  }
                ]
              },
              "sales_data_analysis": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "narrative_analysis"
                ],
                "properties": {
                  "sales_trend_over_time_chart_reference": {
                    "type": "string"
                  },
                  "narrative_analysis": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  }
                }
              },
              "size_and_characteristics_of_population_using_device": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "usage_frequency",
                  "estimated_size_of_patient_population_exposed",
                  "characteristics_of_patient_population_exposed"
                ],
                "properties": {
                  "usage_frequency": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": [
                      "single_use_per_patient",
                      "multiple_uses_per_patient"
                    ],
                    "properties": {
                      "single_use_per_patient": {
                        "$ref": "#/$defs/TriState",
                        "ui": {
                          "widget": "select"
                        }
                      },
                      "multiple_uses_per_patient": {
                        "$ref": "#/$defs/TriState",
                        "ui": {
                          "widget": "select"
                        }
                      },
                      "average_uses_per_patient": {
                        "type": [
                          "number",
                          "null"
                        ],
                        "minimum": 0
                      }
                    }
                  },
                  "estimated_size_of_patient_population_exposed": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  },
                  "characteristics_of_patient_population_exposed": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  }
                }
              }
            }
          },
          "D_information_on_serious_incidents": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "narrative_summary",
              "table_2_serious_incidents_by_imdrf_annex_a_by_region",
              "table_3_serious_incidents_by_imdrf_annex_c_investigation_findings_by_region",
              "table_4_health_impact_by_investigation_conclusion"
            ],
            "properties": {
              "narrative_summary": {
                "type": "string",
                "ui": {
                  "widget": "textarea"
                }
              },
              "table_2_serious_incidents_by_imdrf_annex_a_by_region": {
                "type": "array",
                "minItems": 0,
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": [
                    "region",
                    "imdrf_problem_code_and_term",
                    "n_current_period"
                  ],
                  "properties": {
                    "region": {
                      "type": "string"
                    },
                    "imdrf_problem_code_and_term": {
                      "type": "string"
                    },
                    "n_current_period": {
                      "type": [
                        "integer",
                        "null"
                      ],
                      "minimum": 0
                    },
                    "rate_percent": {
                      "type": [
                        "number",
                        "null"
                      ],
                      "minimum": 0,
                      "maximum": 100
                    },
                    "complaint_number": {
                      "type": "string"
                    }
                  }
                },
                "ui": {
                  "widget": "table"
                }
              },
              "table_3_serious_incidents_by_imdrf_annex_c_investigation_findings_by_region": {
                "type": "array",
                "minItems": 0,
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": [
                    "region",
                    "imdrf_cause_code_and_term",
                    "n_current_period"
                  ],
                  "properties": {
                    "region": {
                      "type": "string"
                    },
                    "imdrf_cause_code_and_term": {
                      "type": "string"
                    },
                    "n_current_period": {
                      "type": [
                        "integer",
                        "null"
                      ],
                      "minimum": 0
                    },
                    "rate_percent": {
                      "type": [
                        "number",
                        "null"
                      ],
                      "minimum": 0,
                      "maximum": 100
                    },
                    "complaint_number": {
                      "type": "string"
                    }
                  }
                },
                "ui": {
                  "widget": "table"
                }
              },
              "table_4_health_impact_by_investigation_conclusion": {
                "type": "array",
                "minItems": 0,
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": [
                    "region",
                    "imdrf_health_impact_annex_f_code_and_term",
                    "number_of_serious_incidents"
                  ],
                  "properties": {
                    "region": {
                      "type": "string"
                    },
                    "imdrf_health_impact_annex_f_code_and_term": {
                      "type": "string"
                    },
                    "number_of_serious_incidents": {
                      "type": [
                        "integer",
                        "null"
                      ],
                      "minimum": 0
                    },
                    "investigation_conclusion_1": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "code_and_term": {
                          "type": "string"
                        },
                        "percent": {
                          "type": [
                            "number",
                            "null"
                          ],
                          "minimum": 0,
                          "maximum": 100
                        }
                      }
                    },
                    "investigation_conclusion_2": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "code_and_term": {
                          "type": "string"
                        },
                        "percent": {
                          "type": [
                            "number",
                            "null"
                          ],
                          "minimum": 0,
                          "maximum": 100
                        }
                      }
                    },
                    "investigation_conclusion_3": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "code_and_term": {
                          "type": "string"
                        },
                        "percent": {
                          "type": [
                            "number",
                            "null"
                          ],
                          "minimum": 0,
                          "maximum": 100
                        }
                      }
                    },
                    "investigation_conclusion_4": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "code_and_term": {
                          "type": "string"
                        },
                        "percent": {
                          "type": [
                            "number",
                            "null"
                          ],
                          "minimum": 0,
                          "maximum": 100
                        }
                      }
                    }
                  }
                },
                "ui": {
                  "widget": "table"
                }
              },
              "new_incident_types_identified_this_cycle": {
                "type": "string",
                "ui": {
                  "widget": "textarea"
                }
              }
            }
          },
          "E_customer_feedback": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "summary",
              "table_6_feedback_by_type_and_source"
            ],
            "properties": {
              "summary": {
                "type": "string",
                "ui": {
                  "widget": "textarea"
                }
              },
              "table_6_feedback_by_type_and_source": {
                "type": "array",
                "minItems": 0,
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": [
                    "feedback_type",
                    "source",
                    "count",
                    "summary"
                  ],
                  "properties": {
                    "feedback_type": {
                      "type": "string"
                    },
                    "source": {
                      "type": "string"
                    },
                    "count": {
                      "type": [
                        "integer",
                        "null"
                      ],
                      "minimum": 0
                    },
                    "summary": {
                      "type": "string",
                      "ui": {
                        "widget": "textarea"
                      }
                    }
                  }
                },
                "ui": {
                  "widget": "table"
                }
              }
            }
          },
          "F_product_complaint_types_counts_and_rates": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "complaint_rate_calculation",
              "annual_number_of_complaints_and_complaint_rate_by_harm_and_medical_device_problem",
              "table_7_complaint_rate_and_count"
            ],
            "properties": {
              "complaint_rate_calculation": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "method_description_and_justification"
                ],
                "properties": {
                  "method_description_and_justification": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  }
                }
              },
              "annual_number_of_complaints_and_complaint_rate_by_harm_and_medical_device_problem": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "risk_documentation_update_needed"
                ],
                "properties": {
                  "commentary_context_for_exceedances": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  },
                  "risk_documentation_update_needed": {
                    "$ref": "#/$defs/TriState",
                    "ui": {
                      "widget": "select"
                    }
                  }
                }
              },
              "table_7_complaint_rate_and_count": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "use_if_psur_frequency"
                ],
                "properties": {
                  "use_if_psur_frequency": {
                    "type": "string",
                    "enum": [
                      "ANNUALLY",
                      "EVERY_TWO_YEARS"
                    ],
                    "ui": {
                      "widget": "select"
                    }
                  },
                  "annual_format": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": [
                      "date_range",
                      "rows"
                    ],
                    "properties": {
                      "date_range": {
                        "type": "string"
                      },
                      "rows": {
                        "type": "array",
                        "minItems": 0,
                        "items": {
                          "type": "object",
                          "additionalProperties": false,
                          "required": [
                            "harm",
                            "medical_device_problem"
                          ],
                          "properties": {
                            "harm": {
                              "type": "string"
                            },
                            "medical_device_problem": {
                              "type": "string"
                            },
                            "current_12_month_complaint_count": {
                              "type": [
                                "integer",
                                "null"
                              ],
                              "minimum": 0
                            },
                            "current_12_month_complaint_rate": {
                              "type": [
                                "number",
                                "null"
                              ],
                              "minimum": 0
                            },
                            "max_expected_rate_of_occurrence_from_ract": {
                              "type": [
                                "number",
                                "null"
                              ],
                              "minimum": 0
                            }
                          }
                        },
                        "ui": {
                          "widget": "table"
                        }
                      },
                      "grand_total": {
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                          "complaint_count": {
                            "type": [
                              "integer",
                              "null"
                            ],
                            "minimum": 0
                          },
                          "complaint_rate": {
                            "type": [
                              "number",
                              "null"
                            ],
                            "minimum": 0
                          }
                        }
                      }
                    }
                  },
                  "every_two_years_format": {
                    "type": "object",
                    "additionalProperties": false,
                    "required": [
                      "date_ranges",
                      "rows"
                    ],
                    "properties": {
                      "date_ranges": {
                        "type": "array",
                        "minItems": 2,
                        "maxItems": 2,
                        "items": {
                          "type": "string"
                        }
                      },
                      "rows": {
                        "type": "array",
                        "minItems": 0,
                        "items": {
                          "type": "object",
                          "additionalProperties": false,
                          "required": [
                            "harm",
                            "medical_device_problem"
                          ],
                          "properties": {
                            "harm": {
                              "type": "string"
                            },
                            "medical_device_problem": {
                              "type": "string"
                            },
                            "period_1_complaint_count": {
                              "type": [
                                "integer",
                                "null"
                              ],
                              "minimum": 0
                            },
                            "period_1_complaint_rate": {
                              "type": [
                                "number",
                                "null"
                              ],
                              "minimum": 0
                            },
                            "period_2_complaint_count": {
                              "type": [
                                "integer",
                                "null"
                              ],
                              "minimum": 0
                            },
                            "period_2_complaint_rate": {
                              "type": [
                                "number",
                                "null"
                              ],
                              "minimum": 0
                            },
                            "max_expected_rate_of_occurrence_from_ract": {
                              "type": [
                                "number",
                                "null"
                              ],
                              "minimum": 0
                            }
                          }
                        },
                        "ui": {
                          "widget": "table"
                        }
                      },
                      "grand_total": {
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                          "period_1_complaint_count": {
                            "type": [
                              "integer",
                              "null"
                            ],
                            "minimum": 0
                          },
                          "period_1_complaint_rate": {
                            "type": [
                              "number",
                              "null"
                            ],
                            "minimum": 0
                          },
                          "period_2_complaint_count": {
                            "type": [
                              "integer",
                              "null"
                            ],
                            "minimum": 0
                          },
                          "period_2_complaint_rate": {
                            "type": [
                              "number",
                              "null"
                            ],
                            "minimum": 0
                          }
                        }
                      }
                    }
                  }
                },
                "allOf": [
                  {
                    "if": {
                      "properties": {
                        "use_if_psur_frequency": {
                          "const": "ANNUALLY"
                        }
                      }
                    },
                    "then": {
                      "required": [
                        "annual_format"
                      ]
                    }
                  },
                  {
                    "if": {
                      "properties": {
                        "use_if_psur_frequency": {
                          "const": "EVERY_TWO_YEARS"
                        }
                      }
                    },
                    "then": {
                      "required": [
                        "every_two_years_format"
                      ]
                    }
                  }
                ]
              }
            }
          },
          "G_information_from_trend_reporting": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "overall_monthly_complaint_rate_trending",
              "trend_reporting_summary"
            ],
            "properties": {
              "overall_monthly_complaint_rate_trending": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "breaches_commentary_and_actions"
                ],
                "properties": {
                  "graph_reference": {
                    "type": "string"
                  },
                  "upper_control_limit_definition": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  },
                  "breaches_commentary_and_actions": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  }
                }
              },
              "trend_reporting_summary": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "trend_reports"
                ],
                "properties": {
                  "statement_if_not_applicable": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  },
                  "trend_reports": {
                    "type": "array",
                    "minItems": 0,
                    "items": {
                      "type": "object",
                      "additionalProperties": false,
                      "required": [
                        "affected_device_models_or_trade_names",
                        "manufacturer_reference_number",
                        "date_trend_first_identified",
                        "current_status_of_trend_investigation"
                      ],
                      "properties": {
                        "affected_device_models_or_trade_names": {
                          "type": "string",
                          "ui": {
                            "widget": "textarea"
                          }
                        },
                        "manufacturer_reference_number": {
                          "type": "string"
                        },
                        "date_trend_first_identified": {
                          "type": "string",
                          "format": "date"
                        },
                        "date_reported_to_mhra_if_applicable": {
                          "type": "string",
                          "format": "date"
                        },
                        "current_status_of_trend_investigation": {
                          "type": "string",
                          "ui": {
                            "widget": "textarea"
                          }
                        },
                        "corrective_or_preventive_actions_resulted": {
                          "type": "string",
                          "ui": {
                            "widget": "textarea"
                          }
                        },
                        "fsca_reference_number_if_relevant": {
                          "type": "string"
                        }
                      }
                    },
                    "ui": {
                      "widget": "table"
                    }
                  }
                }
              }
            }
          },
          "H_information_from_fsca": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "summary_or_na_statement",
              "table_8_fsca_initiated_current_period_and_open_fscas"
            ],
            "properties": {
              "summary_or_na_statement": {
                "type": "string",
                "ui": {
                  "widget": "textarea"
                }
              },
              "table_8_fsca_initiated_current_period_and_open_fscas": {
                "type": "array",
                "minItems": 0,
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": [
                    "type_of_action",
                    "manufacturer_reference_number",
                    "issuing_date_or_date_of_final_fsn",
                    "scope_of_fsca_device_models_within_scope",
                    "status_of_fsca",
                    "rationale_and_description_of_action_taken",
                    "impacted_regions"
                  ],
                  "properties": {
                    "type_of_action": {
                      "type": "string"
                    },
                    "manufacturer_reference_number": {
                      "type": "string"
                    },
                    "issuing_date_or_date_of_final_fsn": {
                      "type": "string",
                      "format": "date"
                    },
                    "scope_of_fsca_device_models_within_scope": {
                      "type": "string",
                      "ui": {
                        "widget": "textarea"
                      }
                    },
                    "status_of_fsca": {
                      "type": "string"
                    },
                    "rationale_and_description_of_action_taken": {
                      "type": "string",
                      "ui": {
                        "widget": "textarea"
                      }
                    },
                    "impacted_regions": {
                      "type": "string",
                      "ui": {
                        "widget": "textarea"
                      }
                    },
                    "date_reported_to_mhra_if_applicable": {
                      "type": "string",
                      "format": "date"
                    }
                  }
                },
                "ui": {
                  "widget": "table"
                }
              }
            }
          },
          "I_corrective_and_preventive_actions": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "summary_or_na_statement",
              "table_9_capa_initiated_current_reporting_period"
            ],
            "properties": {
              "summary_or_na_statement": {
                "type": "string",
                "ui": {
                  "widget": "textarea"
                }
              },
              "table_9_capa_initiated_current_reporting_period": {
                "type": "array",
                "minItems": 0,
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": [
                    "capa_number_or_manufacturer_reference_number",
                    "initiation_date",
                    "scope_of_capa",
                    "status_of_capa",
                    "capa_description",
                    "root_cause",
                    "effectiveness_of_capa",
                    "target_date_for_completion_if_ongoing"
                  ],
                  "properties": {
                    "capa_number_or_manufacturer_reference_number": {
                      "type": "string"
                    },
                    "initiation_date": {
                      "type": "string",
                      "format": "date"
                    },
                    "scope_of_capa": {
                      "type": "string",
                      "ui": {
                        "widget": "textarea"
                      }
                    },
                    "status_of_capa": {
                      "type": "string"
                    },
                    "capa_description": {
                      "type": "string",
                      "ui": {
                        "widget": "textarea"
                      }
                    },
                    "root_cause": {
                      "type": "string",
                      "ui": {
                        "widget": "textarea"
                      }
                    },
                    "effectiveness_of_capa": {
                      "type": "string",
                      "ui": {
                        "widget": "textarea"
                      }
                    },
                    "target_date_for_completion_if_ongoing": {
                      "type": "string",
                      "format": "date"
                    }
                  }
                },
                "ui": {
                  "widget": "table"
                }
              }
            }
          },
          "J_scientific_literature_review": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "literature_search_methodology",
              "summary_of_new_data_performance_or_safety"
            ],
            "properties": {
              "literature_search_methodology": {
                "type": "string",
                "ui": {
                  "widget": "textarea"
                }
              },
              "number_of_relevant_articles_identified": {
                "type": [
                  "integer",
                  "null"
                ],
                "minimum": 0
              },
              "summary_of_new_data_performance_or_safety": {
                "type": "string",
                "ui": {
                  "widget": "textarea"
                }
              },
              "newly_observed_uses": {
                "type": "string",
                "ui": {
                  "widget": "textarea"
                }
              },
              "previously_unassessed_risks": {
                "type": "string",
                "ui": {
                  "widget": "textarea"
                }
              },
              "state_of_the_art_changes": {
                "type": "string",
                "ui": {
                  "widget": "textarea"
                }
              },
              "comparison_with_similar_devices": {
                "type": "string",
                "ui": {
                  "widget": "textarea"
                }
              },
              "technical_documentation_search_results_reference": {
                "type": "string",
                "ui": {
                  "widget": "text"
                }
              }
            }
          },
          "K_review_of_external_databases_and_registries": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "registries_reviewed_summary",
              "table_10_adverse_events_and_recalls"
            ],
            "properties": {
              "registries_reviewed_summary": {
                "type": "string",
                "ui": {
                  "widget": "textarea"
                }
              },
              "table_10_adverse_events_and_recalls": {
                "type": "array",
                "minItems": 0,
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": [
                    "database_or_registry",
                    "total_matches",
                    "relevant_findings"
                  ],
                  "properties": {
                    "database_or_registry": {
                      "type": "string"
                    },
                    "total_matches": {
                      "type": [
                        "integer",
                        "null"
                      ],
                      "minimum": 0
                    },
                    "relevant_findings": {
                      "type": "string",
                      "ui": {
                        "widget": "textarea"
                      }
                    },
                    "benchmark_vs_similar_devices": {
                      "type": "string",
                      "ui": {
                        "widget": "textarea"
                      }
                    },
                    "regulatory_actions_affecting_similar_devices": {
                      "type": "string",
                      "ui": {
                        "widget": "textarea"
                      }
                    },
                    "rmf_update_reference": {
                      "type": "string"
                    }
                  }
                },
                "ui": {
                  "widget": "table"
                }
              }
            }
          },
          "L_pmcf": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "summary_or_na_statement",
              "table_11_pmcf_activities"
            ],
            "properties": {
              "summary_or_na_statement": {
                "type": "string",
                "ui": {
                  "widget": "textarea"
                }
              },
              "table_11_pmcf_activities": {
                "type": "array",
                "minItems": 0,
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": [
                    "specific_pmcf_activities",
                    "key_findings",
                    "impact_on_safety_performance"
                  ],
                  "properties": {
                    "specific_pmcf_activities": {
                      "type": "string",
                      "ui": {
                        "widget": "textarea"
                      }
                    },
                    "key_findings": {
                      "type": "string",
                      "ui": {
                        "widget": "textarea"
                      }
                    },
                    "impact_on_safety_performance": {
                      "type": "string",
                      "ui": {
                        "widget": "textarea"
                      }
                    },
                    "rmf_or_cer_update": {
                      "type": "string",
                      "ui": {
                        "widget": "textarea"
                      }
                    },
                    "pmcf_evaluation_report_reference": {
                      "type": "string"
                    }
                  }
                },
                "ui": {
                  "widget": "table"
                }
              }
            }
          },
          "M_findings_and_conclusions": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "benefit_risk_profile_conclusion",
              "overall_performance_conclusion",
              "actions_taken_or_planned"
            ],
            "properties": {
              "benefit_risk_profile_conclusion": {
                "type": "string",
                "ui": {
                  "widget": "textarea"
                }
              },
              "intended_benefits_achieved": {
                "type": "string",
                "ui": {
                  "widget": "textarea"
                }
              },
              "limitations_of_data_and_conclusion": {
                "type": "string",
                "ui": {
                  "widget": "textarea"
                }
              },
              "new_or_emerging_risks_or_new_benefits": {
                "type": "string",
                "ui": {
                  "widget": "textarea"
                }
              },
              "actions_taken_or_planned": {
                "type": "object",
                "additionalProperties": false,
                "required": [
                  "action_details_and_follow_up"
                ],
                "properties": {
                  "benefit_risk_assessment_update": {
                    "type": "boolean",
                    "default": false
                  },
                  "risk_management_file_update": {
                    "type": "boolean",
                    "default": false
                  },
                  "product_design_update": {
                    "type": "boolean",
                    "default": false
                  },
                  "manufacturing_process_update": {
                    "type": "boolean",
                    "default": false
                  },
                  "ifu_or_labeling_update": {
                    "type": "boolean",
                    "default": false
                  },
                  "clinical_evaluation_report_update": {
                    "type": "boolean",
                    "default": false
                  },
                  "sscp_update_if_applicable": {
                    "type": "boolean",
                    "default": false
                  },
                  "capa_initiated": {
                    "type": "boolean",
                    "default": false
                  },
                  "fsca_initiated": {
                    "type": "boolean",
                    "default": false
                  },
                  "action_details_and_follow_up": {
                    "type": "string",
                    "ui": {
                      "widget": "textarea"
                    }
                  }
                }
              },
              "overall_performance_conclusion": {
                "type": "string",
                "ui": {
                  "widget": "textarea"
                }
              }
            }
          }
        }
      }
    }
  },
  "uiSchema": {
    "ui:globalOptions": {
      "validateOn": "blur",
      "showErrors": "inline",
      "lockSectionOrder": true
    },
    "sections": {
      "ui:order": [
        "A_executive_summary",
        "B_scope_and_device_description",
        "C_volume_of_sales_and_population_exposure",
        "D_information_on_serious_incidents",
        "E_customer_feedback",
        "F_product_complaint_types_counts_and_rates",
        "G_information_from_trend_reporting",
        "H_information_from_fsca",
        "I_corrective_and_preventive_actions",
        "J_scientific_literature_review",
        "K_review_of_external_databases_and_registries",
        "L_pmcf",
        "M_findings_and_conclusions"
      ],
      "A_executive_summary": {
        "ui:title": "Section A: Executive Summary"
      },
      "B_scope_and_device_description": {
        "ui:title": "Section B: Scope and Device Description"
      },
      "C_volume_of_sales_and_population_exposure": {
        "ui:title": "Section C: Volume of Sales and Population Exposure"
      },
      "D_information_on_serious_incidents": {
        "ui:title": "Section D: Information on Serious Incidents"
      },
      "E_customer_feedback": {
        "ui:title": "Section E: Customer Feedback"
      },
      "F_product_complaint_types_counts_and_rates": {
        "ui:title": "Section F: Product Complaint Types, Complaint Counts, and Complaint Rates",
        "table_7_complaint_rate_and_count": {
          "ui:field": "HierarchicalTable",
          "ui:options": {
            "gridLines": true,
            "headerRepeat": true,
            "rowIndentFieldWhen": {
              "row_type": "MEDICAL_DEVICE_PROBLEM"
            },
            "cellTemplate": {
              "current_period_value": "stacked_rate_count"
            }
          }
        }
      },
      "G_information_from_trend_reporting": {
        "ui:title": "Section G: Information from Trend Reporting"
      },
      "H_information_from_fsca": {
        "ui:title": "Section H: Information from Field Safety Corrective Actions (FSCA)"
      },
      "I_corrective_and_preventive_actions": {
        "ui:title": "Section I: Corrective and Preventive Actions"
      },
      "J_scientific_literature_review": {
        "ui:title": "Section J: Scientific Literature Review"
      },
      "K_review_of_external_databases_and_registries": {
        "ui:title": "Section K: Review of External Databases and Registries"
      },
      "L_pmcf": {
        "ui:title": "Section L: Post-Market Clinical Follow-up (PMCF)"
      },
      "M_findings_and_conclusions": {
        "ui:title": "Section M: Findings and Conclusions"
      }
    }
  },
  "layout": {
    "pageModel": "A4",
    "section_order_locked": true,
    "typography_lock": {
      "fontFamily": "Arial",
      "fontSizePt": 10,
      "lineHeight": 1.15
    },
    "tables": {
      "C.table_1_annual_sales": {
        "columns": [
          {
            "key": "region",
            "header": "Region"
          },
          {
            "key": "preceding_period_1",
            "header": "Period 1"
          },
          {
            "key": "preceding_period_2",
            "header": "Period 2"
          },
          {
            "key": "preceding_period_3",
            "header": "Period 3"
          },
          {
            "key": "current_data_collection_period",
            "header": "Current Period"
          },
          {
            "key": "percent_of_global_sales",
            "header": "% Global Sales"
          }
        ],
        "header_rows": 3,
        "merged_cells": [
          {
            "row": 0,
            "col_start": 1,
            "col_end": 3,
            "label": "Preceding 12-Month Periods"
          },
          {
            "row": 0,
            "col_start": 4,
            "col_end": 4,
            "label": "Current Data Collection Period"
          },
          {
            "row": 0,
            "col_start": 5,
            "col_end": 5,
            "label": "% of Global Sales"
          }
        ]
      },
      "D.table_2": {
        "columns": [
          {
            "key": "region",
            "header": "Region"
          },
          {
            "key": "imdrf_problem_code_and_term",
            "header": "IMDRF Problem Code & Term"
          },
          {
            "key": "n_current_period",
            "header": "N (Current Period)"
          },
          {
            "key": "rate_percent",
            "header": "Rate (%)"
          },
          {
            "key": "complaint_number",
            "header": "Complaint Number"
          }
        ]
      },
      "D.table_3": {
        "columns": [
          {
            "key": "region",
            "header": "Region"
          },
          {
            "key": "imdrf_cause_code_and_term",
            "header": "IMDRF Cause Code & Term"
          },
          {
            "key": "n_current_period",
            "header": "N (Current Period)"
          },
          {
            "key": "rate_percent",
            "header": "Rate (%)"
          },
          {
            "key": "complaint_number",
            "header": "Complaint Number"
          }
        ]
      },
      "D.table_4": {
        "columns": [
          {
            "key": "region",
            "header": "Region"
          },
          {
            "key": "imdrf_health_impact_annex_f_code_and_term",
            "header": "IMDRF Health Impact (Annex F)"
          },
          {
            "key": "number_of_serious_incidents",
            "header": "# Serious Incidents"
          },
          {
            "key": "investigation_conclusion_1",
            "header": "Investigation Conclusion 1"
          },
          {
            "key": "investigation_conclusion_2",
            "header": "Investigation Conclusion 2"
          },
          {
            "key": "investigation_conclusion_3",
            "header": "Investigation Conclusion 3"
          },
          {
            "key": "investigation_conclusion_4",
            "header": "Investigation Conclusion 4"
          }
        ]
      },
      "E.table_6": {
        "columns": [
          {
            "key": "feedback_type",
            "header": "Feedback Type"
          },
          {
            "key": "source",
            "header": "Source"
          },
          {
            "key": "count",
            "header": "Count"
          },
          {
            "key": "summary",
            "header": "Summary"
          }
        ]
      },
      "F.table_7_annually_harm_problem": {
        "columns": [
          {
            "key": "label",
            "header": "Harm / Medical Device Problem"
          },
          {
            "key": "current_period_value",
            "header": "Current Period (Rate / Count)"
          },
          {
            "key": "max_expected_rate_from_ract",
            "header": "Max Expected Rate (RACT)"
          }
        ]
      },
      "G.trend_reports": {
        "columns": [
          {
            "key": "affected_device_models_or_trade_names",
            "header": "Affected Device Models / Trade Names"
          },
          {
            "key": "manufacturer_reference_number",
            "header": "Manufacturer Ref No."
          },
          {
            "key": "date_trend_first_identified",
            "header": "Date Trend First Identified"
          },
          {
            "key": "date_reported_to_mhra_if_applicable",
            "header": "Date Reported to MHRA"
          },
          {
            "key": "current_status_of_trend_investigation",
            "header": "Status of Investigation"
          },
          {
            "key": "corrective_or_preventive_actions_resulted",
            "header": "Corrective/Preventive Actions"
          },
          {
            "key": "fsca_reference_number_if_relevant",
            "header": "FSCA Ref No."
          }
        ]
      },
      "H.table_8_fsca": {
        "columns": [
          {
            "key": "type_of_action",
            "header": "Type of Action"
          },
          {
            "key": "manufacturer_reference_number",
            "header": "Manufacturer Ref No."
          },
          {
            "key": "issuing_date_or_date_of_final_fsn",
            "header": "Issuing Date / Date of Final FSN"
          },
          {
            "key": "scope_of_fsca_device_models_within_scope",
            "header": "Scope of FSCA"
          },
          {
            "key": "status_of_fsca",
            "header": "Status of FSCA"
          },
          {
            "key": "rationale_and_description_of_action_taken",
            "header": "Rationale & Description"
          },
          {
            "key": "impacted_regions",
            "header": "Impacted Regions"
          },
          {
            "key": "date_reported_to_mhra_if_applicable",
            "header": "Date Reported to MHRA"
          }
        ]
      },
      "I.table_9_capa": {
        "columns": [
          {
            "key": "capa_number_or_manufacturer_reference_number",
            "header": "CAPA Number / Ref No."
          },
          {
            "key": "initiation_date",
            "header": "Initiation Date"
          },
          {
            "key": "scope_of_capa",
            "header": "Scope of CAPA"
          },
          {
            "key": "status_of_capa",
            "header": "Status"
          },
          {
            "key": "capa_description",
            "header": "CAPA Description"
          },
          {
            "key": "root_cause",
            "header": "Root Cause"
          },
          {
            "key": "effectiveness_of_capa",
            "header": "Effectiveness"
          },
          {
            "key": "target_date_for_completion_if_ongoing",
            "header": "Target Date"
          }
        ]
      },
      "K.table_10": {
        "columns": [
          {
            "key": "database_or_registry",
            "header": "Database / Registry"
          },
          {
            "key": "total_matches",
            "header": "Total Matches"
          },
          {
            "key": "relevant_findings",
            "header": "Relevant Findings"
          },
          {
            "key": "benchmark_vs_similar_devices",
            "header": "Benchmark vs Similar Devices"
          },
          {
            "key": "regulatory_actions_affecting_similar_devices",
            "header": "Regulatory Actions"
          },
          {
            "key": "rmf_update_reference",
            "header": "RMF Update Ref"
          }
        ]
      },
      "L.table_11_pmcf": {
        "columns": [
          {
            "key": "specific_pmcf_activities",
            "header": "PMCF Activities"
          },
          {
            "key": "key_findings",
            "header": "Key Findings"
          },
          {
            "key": "impact_on_safety_performance",
            "header": "Impact on Safety/Performance"
          },
          {
            "key": "rmf_or_cer_update",
            "header": "RMF/CER Update"
          },
          {
            "key": "pmcf_evaluation_report_reference",
            "header": "PMCF Report Ref"
          }
        ]
      },
      "B.associated_documents": {
        "columns": [
          {
            "key": "document_type",
            "header": "Document Type"
          },
          {
            "key": "document_number",
            "header": "Document Number"
          },
          {
            "key": "document_title",
            "header": "Document Title"
          }
        ],
        "prefill_rows": [
          "PMS Plan",
          "Clinical Evaluation Report",
          "PMCF Plan"
        ]
      },
      "B.mdr_devices_table": {
        "columns": [
          {
            "key": "basic_udi_di",
            "header": "Basic UDI-DI"
          },
          {
            "key": "device_trade_name",
            "header": "Device Trade Name"
          },
          {
            "key": "emdn_code",
            "header": "EMDN Code"
          },
          {
            "key": "changes_from_previous_psur",
            "header": "Changes from Previous PSUR"
          }
        ]
      }
    }
  },
  "theme": {
    "word_form_fidelity": {
      "fontFamily": "Arial",
      "fontSizePt": 10,
      "lineHeight": 1.15,
      "sectionTitleWeight": 700,
      "blockSpacingPx": 6,
      "table": {
        "border": "1px solid #000000",
        "gridLines": true,
        "headerWeight": 700,
        "cellPaddingPx": 4
      },
      "inputs": {
        "text": {
          "heightPx": 24
        },
        "textarea": {
          "minHeightPx": 60
        },
        "radioInline": true
      }
    }
  }
}